!function(){var o=function(o,e,n){for(var t=o.split(n),i="",a=0;a<t.length;a++){for(;" "===t[a].charAt(0);)t[a]=t[a].substring(1);if(0==t[a].indexOf(e+"=")){i=t[a].substring(e.length+1,t[a].length);break}}return i},e=function(o){return void 0!==geolocation.locations[o]},h=function(o){return o*(Math.PI/180)},n=function(o){var e,n,t,i,a,c,r,l=null;if(200===o.status&&window.JSON){var u=JSON.parse(o.responseText);if(u){var s=u.latitude,g=u.longitude,d=geolocation.tolerance_radius?geolocation.tolerance_radius:null;for(var p in geolocation.locations){var f=geolocation.locations[p],_=parseFloat(f[0]),w=parseFloat(f[1]);if(_&&w){var v=(e=g,n=_,t=w,void 0,i=h(s),a=h(e),c=h(n),r=h(t),12742*Math.asin(Math.sqrt(Math.pow(Math.sin((c-i)/2),2)+Math.cos(i)*Math.cos(c)*Math.pow(Math.sin((r-a)/2),2))));(null===d||v<d)&&(d=v,l=p)}}}}return function(){var o=!("undefined"===navigator.cookieEnabled||!navigator.cookieEnabled)||null;if(!o){document.cookie="geolocation_testcookie=1",-1!==document.cookie.indexOf("geolocation_testcookie=1")&&(o=!0);var e=new Date(1981,7,16);document.cookie="geolocation_testcookie=1;expires="+e.toUTCString()}return o}()&&(document.cookie=encodeURIComponent(m)+"="+encodeURIComponent(l||"default")+"; expires="+geolocation.cookie.expires+"; path=/"),l},t=o(window.location.search.substring(1),"override_location","&"),i=null;if(t&&e(t))t!==geolocation.current_location_slug&&(i=window.location.pathname.replace(/\?override_location=.+/,""),geolocation.current_location_slug&&(i=i.replace("/"+geolocation.current_location_slug+"/","/")),i="/"+t+i);else{var m=geolocation.cookie.name;if(m){var a=o(document.cookie,geolocation.cookie.name,";");if(a)!geolocation.current_location_slug&&e(a)&&(i="/"+a+window.location.pathname);else if(window.XMLHttpRequest){var c=new XMLHttpRequest,r=!!geolocation.current_location_slug;c.open("GET",geolocation.service,r),r&&(c.onreadystatechange=function(){XMLHttpRequest.DONE===c.readyState&&n(c)}),c.send(null),r||(a=n(c))&&(i="/"+a+window.location.pathname)}}}i&&(window.location=i)}();
